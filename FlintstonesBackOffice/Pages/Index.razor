@page "/"
@using FlintstonesBackOffice.Services
@inject SummaryService SummaryService


<PageTitle>Home</PageTitle>

@*<LoginComponent></LoginComponent>*@

@if (_processing)
{
    <MudProgressLinear Color="Color.Primary" Indeterminate="true" />
}

<MudGrid>
    <MudItem xs="3">
        <MudPaper Class="d-flex align-center justify-center mud-width-full py-8">
            <MudText Typo="Typo.h6">
                <MudIcon Icon="@Icons.Material.Filled.AddTask" Color="Color.Primary" />
                Bets: @NumberOfBets
            </MudText>

        </MudPaper>
    </MudItem>
    <MudItem xs="3">
        <MudPaper Class="d-flex align-center justify-center mud-width-full py-8">
            <MudText Typo="Typo.h6">
                <MudIcon Icon="@Icons.Material.Filled.AttachMoney" Color="Color.Success" />
                Stake: @TotalStake
            </MudText>
        </MudPaper>
    </MudItem>
    <MudItem xs="3">
        <MudPaper Class="d-flex align-center justify-center mud-width-full py-8">
            <MudText Typo="Typo.h6">
                <MudIcon Icon="@Icons.Material.Filled.Bolt" Color="Color.Info" />
                Paid Out: @TotalPayout.ToString("N2")
            </MudText>
        </MudPaper>
    </MudItem>
    <MudItem xs="3">
        <MudPaper Class="d-flex align-center justify-center mud-width-full py-8">
            <MudText Typo="Typo.h6">
                <MudIcon Icon="@Icons.Material.Filled.HeartBroken" Color="Color.Error" />
                Heartbeats: 0
            </MudText>
        </MudPaper>
    </MudItem>
    <br />
    <MudItem xs="12">
        <MudSimpleTable Style="overflow-x: auto;">
            <thead>
                <tr>
                    @foreach (var h in headings)
                    {
                        <th>@h</th>
                    }
                </tr>
            </thead>
            <tbody>
                @foreach (var row in _bets)
                {
                    <tr>
                        <td>@row.CreatedDate</td>
                        <td>@row.Market</td>

                        @if (@row.Selection == 1)
                        {
                            <td>Price to go UP</td>
                        }
                        else
                        {
                            <td>Price to go DOWN</td>
                        }

                        <td>@row.Duration (secs)</td>

                        @if (@row.StatusID == 2)
                        {
                            <td style="color:#16a34a; font-weight:500">Win</td>
                        }
                        else if (@row.StatusID == 3)
                        {
                            <td style="color:#dc2626; font-weight:500">Lose</td>
                        }
                        else if (@row.StatusID == 4)
                        {
                            <td style="color:cornflowerblue">Refund</td>
                        }
                        else
                        {
                            <td>Active</td>
                        }

                        <td>@row.StakeAmount</td>

                        @if (@row.StatusID == 2)
                        {
                            <td>@row.TotalPayout.ToString("N2")</td>

                        }
                        else
                        {
                            <td>0</td>
                        }
                    </tr>
                }
            </tbody>
        </MudSimpleTable>
    </MudItem>
</MudGrid>